{"ast":null,"code":"#!/usr/bin/env node\n\nconst fs = require('fs-extra');\n\nconst path = require('path');\n\nconst chalk = require('chalk');\n\nconst {\n  execSync\n} = require('child_process');\n\nconst {\n  modifyPackageJson\n} = require('./helpers');\n\nconst packageRoot = path.join(__dirname, '..');\nconst miniAppDirectory = process.argv[2] ? process.argv[2] : 'mini-app';\nconst showHelp = ~process.argv.indexOf('--help');\nconst useZeit = ~process.argv.indexOf('--zeit');\n\nif (showHelp) {\n  console.error(`üññ Usage:\n1Ô∏è‚É£ Create VK Mini App with @vkontakte/vk-miniapps-deploy deploy: ${chalk.bold.green('create-vk-mini-app <app-directory-name>')}\n2Ô∏è‚É£ Create VK Mini App with Zeit deploy: ${chalk.bold.green('create-vk-mini-app <app-directory-name> --zeit')}`);\n  process.exit(1);\n}\n\nconsole.log('üé¨ Creating project...');\nfs.mkdirSync(miniAppDirectory);\nconsole.log('‚è± Copying VK Mini App source and configuration files..');\nfs.copySync(path.join(packageRoot, 'boilerplate'), miniAppDirectory);\nfs.copySync(path.join(packageRoot, 'README.md'), path.join(miniAppDirectory, 'README.md'));\n\nif (useZeit) {\n  fs.copySync(path.join(packageRoot, 'zeit', 'now.json'), path.join(miniAppDirectory, 'now.json'));\n}\n\nconsole.log(`üñº VK Mini App source and configuration files are copied`);\nconst scriptsToAdd = {};\n\nif (useZeit) {\n  scriptsToAdd['now-build'] = 'react-scripts build';\n}\n\nif (Object.keys(scriptsToAdd).length) {\n  const packageJsonPath = path.join(miniAppDirectory, 'package.json');\n  modifyPackageJson(packageJsonPath, function (packageJson) {\n    packageJson['scripts'] = { ...packageJson['scripts'],\n      ...scriptsToAdd\n    };\n    return packageJson;\n  });\n}\n\nconsole.log('‚è± Installing project dependencies ‚Äî it might take a few minutes..');\n\ntry {\n  execSync(`cd ${miniAppDirectory} && npm ci`);\n} catch (npmErr) {\n  console.error(`üò≥ npm error:\\n${npmErr}`);\n  process.exit(1);\n}\n\nconsole.log('‚úÖ Dependencies are installed');\nconsole.log(`‚úåÔ∏è VK Mini App is ready to start in ${miniAppDirectory} folder. \\nüßê Check README.MD for brief instructrions.\\nüíª Happy Coding!`);","map":{"version":3,"sources":["/home/mogloblina/node_modules/@vkontakte/create-vk-mini-app/bin/create-vk-mini-app.js"],"names":["fs","require","path","chalk","execSync","modifyPackageJson","packageRoot","join","__dirname","miniAppDirectory","process","argv","showHelp","indexOf","useZeit","console","error","bold","green","exit","log","mkdirSync","copySync","scriptsToAdd","Object","keys","length","packageJsonPath","packageJson","npmErr"],"mappings":"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","sourcesContent":["#!/usr/bin/env node\n\nconst fs = require('fs-extra');\nconst path = require('path');\nconst chalk = require('chalk');\nconst { execSync } = require('child_process');\n\nconst { modifyPackageJson } = require('./helpers')\n\nconst packageRoot = path.join(__dirname, '..');\nconst miniAppDirectory = process.argv[2] ? process.argv[2] : 'mini-app';\nconst showHelp = ~process.argv.indexOf('--help');\nconst useZeit = ~process.argv.indexOf('--zeit');\n\nif (showHelp) {\n\tconsole.error(`üññ Usage:\n1Ô∏è‚É£ Create VK Mini App with @vkontakte/vk-miniapps-deploy deploy: ${chalk.bold.green('create-vk-mini-app <app-directory-name>')}\n2Ô∏è‚É£ Create VK Mini App with Zeit deploy: ${chalk.bold.green('create-vk-mini-app <app-directory-name> --zeit')}`);\n\tprocess.exit(1);\n}\n\nconsole.log('üé¨ Creating project...');\nfs.mkdirSync(miniAppDirectory);\n\nconsole.log('‚è± Copying VK Mini App source and configuration files..');\nfs.copySync(path.join(packageRoot, 'boilerplate'), miniAppDirectory);\nfs.copySync(path.join(packageRoot, 'README.md'), path.join(miniAppDirectory, 'README.md'));\n\nif (useZeit) {\n\tfs.copySync(\n\t\tpath.join(packageRoot, 'zeit', 'now.json'),\n\t\tpath.join(miniAppDirectory, 'now.json'),\n\t);\n}\n\nconsole.log(`üñº VK Mini App source and configuration files are copied`);\n\nconst scriptsToAdd = {};\n\nif (useZeit) {\n\tscriptsToAdd['now-build'] = 'react-scripts build';\n}\n\nif (Object.keys(scriptsToAdd).length) {\n\tconst packageJsonPath = path.join(miniAppDirectory, 'package.json');\n\n\tmodifyPackageJson(packageJsonPath, function(packageJson) {\n\t\tpackageJson['scripts'] = {\n\t\t\t...packageJson['scripts'],\n\t\t\t...scriptsToAdd,\n\t\t};\n\n\t\treturn packageJson;\n\t});\n}\n\nconsole.log('‚è± Installing project dependencies ‚Äî it might take a few minutes..');\ntry {\n\texecSync(`cd ${miniAppDirectory} && npm ci`);\n} catch (npmErr) {\n\tconsole.error(`üò≥ npm error:\\n${npmErr}`);\n\tprocess.exit(1);\n}\nconsole.log('‚úÖ Dependencies are installed');\n\nconsole.log(`‚úåÔ∏è VK Mini App is ready to start in ${miniAppDirectory} folder. \\nüßê Check README.MD for brief instructrions.\\nüíª Happy Coding!`)\n"]},"metadata":{},"sourceType":"script"}